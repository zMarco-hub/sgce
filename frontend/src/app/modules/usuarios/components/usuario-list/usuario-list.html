<div class="min-h-screen bg-gray-900 p-8">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-green-400 mb-2">Gestión de Usuarios</h1>
    <p class="text-gray-400">Administra y controla los usuarios del sistema</p>

    <!-- Botón crear con separación -->
    <div class="mt-12 mb-6 flex justify-end">
      <button
        (click)="navegarACrear()"
        class="bg-green-500 hover:bg-green-400 text-gray-900 font-bold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105"
      >
        + Crear Nuevo Usuario
      </button>
    </div>

    <!-- Estado de carga -->
    @if (usuarioService.loading()) {
    <div class="flex justify-center items-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-green-400"></div>
    </div>
    }

    <!-- Error -->
    @if (usuarioService.error()) {
    <div class="bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-lg mb-6">
      <div class="flex justify-between items-center">
        <span>{{ usuarioService.error() }}</span>
        <button (click)="usuarioService.limpiarError()" class="text-red-400 hover:text-red-200">
          ✕
        </button>
      </div>
    </div>
    }

    <!-- Tabla de usuarios -->
    <div class="overflow-x-auto shadow-lg rounded-lg">
      <table class="min-w-full bg-gray-800 text-white border border-gray-700 rounded-lg">
        <thead class="bg-gray-700">
          <tr>
            <th class="py-3 px-6 text-left font-semibold">Nombre</th>
            <th class="py-3 px-6 text-left font-semibold">Correo</th>
            <th class="py-3 px-6 text-left font-semibold">Rol</th>
            <th class="py-3 px-6 text-left font-semibold">Estado</th>
            <th class="py-3 px-6 text-center font-semibold">Acciones</th>
          </tr>
        </thead>
        <tbody class="text-sm">
          @for (usuario of usuarioService.usuarios(); track usuario.id) {
          <tr class="border-b border-gray-700 hover:bg-gray-700 transition-colors">
            <td class="py-3 px-6">{{ usuario.nombre }} {{ usuario.apellido }}</td>
            <td class="py-3 px-6">{{ usuario.email }}</td>
            <td class="py-3 px-6 text-[rgb(0,255,0)] font-semibold">
              {{ usuario.rol.nombre }}
            </td>

            <td class="py-3 px-6">
              <span
                [class]="usuario.activo ? 'bg-green-900 text-green-400' : 'bg-red-900 text-red-400'"
                class="px-2 py-1 rounded-full text-xs font-medium"
              >
                {{ usuario.activo ? 'Activo' : 'Inactivo' }}
              </span>
            </td>
            <td class="py-3 px-6 text-center">
              <div class="flex justify-center space-x-4">
                <button
                  (click)="verDetalle(usuario.id)"
                  class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm transition-colors"
                >
                  Ver
                </button>
                <button
                  (click)="editarUsuario(usuario.id)"
                  class="bg-yellow-600 hover:bg-yellow-500 text-white px-4 py-2 rounded-lg text-sm transition-colors"
                >
                  Editar
                </button>
                <button
                  (click)="eliminarUsuario(usuario.id)"
                  class="bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm transition-colors"
                >
                  Eliminar
                </button>
              </div>
            </td>
          </tr>
          } @empty {
          <tr>
            <td colspan="5" class="text-center py-12 text-gray-500">No hay usuarios registrados</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="min-h-screen bg-gray-900 p-6">
  <div class="max-w-2xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-blue-400 mb-2">
        {{ esEdicion() ? 'Editar Estudiante' : 'Registrar Nuevo Estudiante' }}
      </h1>
      <p class="text-gray-400">
        {{
          esEdicion()
            ? 'Modifica la información del estudiante'
            : 'Completa los datos para registrar un nuevo estudiante'
        }}
      </p>
    </div>

    <!-- Formulario -->
    <form [formGroup]="estudianteForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- ID de Usuario -->
      <div>
        <label for="usuarioId" class="block text-sm font-medium text-gray-300 mb-2">
          ID de Usuario *
        </label>
        <input
          id="usuarioId"
          type="number"
          formControlName="usuarioId"
          min="1"
          class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-colors"
          placeholder="Ingresa el ID del usuario"
        />
        @if (estudianteForm.get('usuarioId')?.invalid && estudianteForm.get('usuarioId')?.touched) {
        @if (estudianteForm.get('usuarioId')?.errors?.['required']) {
        <p class="text-red-400 text-sm mt-1">El ID de usuario es requerido</p>
        } @if (estudianteForm.get('usuarioId')?.errors?.['min']) {
        <p class="text-red-400 text-sm mt-1">El ID debe ser mayor a 0</p>
        } }
      </div>
      <!-- Código de Estudiante -->
      <div>
        <label for="codigo" class="block text-sm font-medium text-gray-300 mb-2">
          Código de Estudiante *
        </label>
        <input
          id="codigo"
          type="text"
          formControlName="codigo"
          class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-colors"
          placeholder="Ingresa el código del estudiante (ej: A12345)"
          uppercase
        />
        @if (estudianteForm.get('codigo')?.invalid && estudianteForm.get('codigo')?.touched) { @if
        (estudianteForm.get('codigo')?.errors?.['required']) {
        <p class="text-red-400 text-sm mt-1">El código es requerido</p>
        } @if (estudianteForm.get('codigo')?.errors?.['pattern']) {
        <p class="text-red-400 text-sm mt-1">Solo letras mayúsculas y números</p>
        } }
      </div>

      <!-- Botones de acción -->
      <div class="flex justify-end space-x-4 pt-6 border-t border-gray-700">
        <button
          type="button"
          (click)="cancelar()"
          class="px-6 py-3 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700/50 transition-colors duration-200"
        >
          Cancelar
        </button>
        <button
          type="submit"
          [disabled]="estudianteForm.invalid || estudianteService.loading()"
          class="px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
          [class]="
            estudianteForm.invalid || estudianteService.loading()
              ? 'bg-gray-600 text-gray-400'
              : 'bg-blue-500 hover:bg-blue-400 text-gray-900 hover:scale-105'
          "
        >
          @if (estudianteService.loading()) {
          <span class="flex items-center justify-center">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900 mr-2"></div>
            Procesando...
          </span>
          } @else {
          {{ esEdicion() ? 'Actualizar Estudiante' : 'Registrar Estudiante' }}
          }
        </button>
      </div>
    </form>
  </div>
</div>
